
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sen Ai Website Analyser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              'brand-primary': '#14b8a6',
              'brand-secondary': '#0f766e',
              'brand-light': '#ccfbf1',
              'brand-dark': '#115e59',
            },
          }
        }
      }
    </script>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.27.0"
      }
    }
    </script>
    <style>
      .score-circle-progress {
        transition: stroke-dashoffset 1s ease-out;
      }
    </style>
</head>
<body class="bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200 font-sans transition-colors duration-300">

    <div class="min-h-screen flex flex-col">
        <header class="bg-white/80 dark:bg-slate-800/50 backdrop-blur-sm sticky top-0 z-10 border-b border-slate-200 dark:border-slate-800">
            <div class="container mx-auto px-4 py-3 max-w-5xl flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-brand-primary p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
                        </svg>
                    </div>
                    <h1 class="text-xl md:text-2xl font-bold text-slate-900 dark:text-white tracking-tight">
                        Sen Ai Website Analyser
                    </h1>
                </div>
                <button id="theme-toggle" type="button" class="text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-500 rounded-lg text-sm p-2.5 transition-colors">
                    <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                    <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 5.05A1 1 0 003.636 6.464l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zM6.464 16.364l-.707.707a1 1 0 001.414 1.414l.707-.707a1 1 0 00-1.414-1.414zM13.536 16.364a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414l.707.707z"></path></svg>
                </button>
            </div>
        </header>

        <main class="container mx-auto px-4 py-8 max-w-5xl flex-grow">
            <div class="bg-white dark:bg-slate-800 p-6 md:p-8 rounded-2xl shadow-xl dark:shadow-2xl dark:shadow-slate-950/50">
                <form id="url-form" class="flex flex-col sm:flex-row items-center gap-3">
                    <div class="relative w-full">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-slate-500 dark:text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                            </svg>
                        </div>
                        <input type="url" id="url-input" placeholder="e.g. https://www.example.com" class="w-full pl-11 pr-4 py-3 bg-slate-100 dark:bg-slate-700/50 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-slate-200 placeholder-slate-500 dark:placeholder-slate-400 focus:ring-2 focus:ring-brand-primary focus:border-brand-primary transition duration-200" required>
                    </div>
                    <button type="submit" id="analyze-button" class="w-full sm:w-auto flex items-center justify-center gap-2 px-6 py-3 bg-brand-primary text-white font-semibold rounded-lg shadow-md hover:bg-brand-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900 focus:ring-brand-primary transition-transform transform active:scale-95 disabled:bg-slate-500 dark:disabled:bg-slate-600 disabled:cursor-not-allowed">
                        <span id="button-text">Analyse</span>
                    </button>
                </form>
                <div id="error-container" class="mt-4"></div>
                <nav id="tabs-container" class="hidden mt-6 border-b border-slate-200 dark:border-slate-700 -mb-px flex space-x-4 overflow-x-auto" aria-label="Tabs"></nav>
            </div>

            <div id="results-container" class="mt-8"></div>
        </main>

        <footer class="text-center py-8 border-t border-slate-200 dark:border-slate-800 text-sm text-slate-500">
             <div class="max-w-5xl mx-auto px-4 space-y-1">
                <p class="font-semibold text-slate-700 dark:text-slate-400 text-base mb-2">Senternet Technologies</p>
                <p>Aranthangi</p>
                <p>
                  <a href="tel:8190038085" class="hover:text-brand-primary transition-colors">Contact: 8190038085</a>
                  <span class="mx-2">|</span>
                  <a href="mailto:senternettechnologies@gmail.com" class="hover:text-brand-primary transition-colors">Email: senternettechnologies@gmail.com</a>
                </p>
                <p class="pt-4 text-xs text-slate-400 dark:text-slate-600">Powered by Google Gemini. Analysis may not be 100% accurate.</p>
            </div>
        </footer>
    </div>

    <script type="module">
        import { GoogleGenAI, Type } from "@google/genai";

        // --- STATE & CONSTANTS ---
        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
        let state = {
            isLoading: false,
            activeTab: 'on-page',
            url: '',
        };
        const TABS = [
          { id: 'on-page', label: 'On-Page SEO' },
          { id: 'off-page', label: 'Off-Page SEO' },
          { id: 'content', label: 'Content' },
          { id: 'performance', label: 'Performance' },
        ];

        // --- DOM ELEMENTS ---
        const urlForm = document.getElementById('url-form');
        const urlInput = document.getElementById('url-input');
        const analyzeButton = document.getElementById('analyze-button');
        const buttonText = document.getElementById('button-text');
        const errorContainer = document.getElementById('error-container');
        const tabsContainer = document.getElementById('tabs-container');
        const resultsContainer = document.getElementById('results-container');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

        // --- GEMINI API HELPERS ---
        const getAnalysisPrompt = (url, type) => {
            const commonInstructions = `Analyze the website at the URL: ${url}. Provide a detailed analysis based on the requested type. For each metric, provide a 'name', its current 'value' (as a string or number), a brief 'explanation' of what it is, an actionable 'recommendation' for improvement, and a 'score' from 0 to 100 representing how well it's implemented (0 is very poor, 100 is excellent).`;
            switch (type) {
                case 'on-page': return `${commonInstructions} Focus on On-Page SEO. Include metrics like: Title Tag, Meta Description, H1 Tag Usage, Image Alt Attributes, Internal Linking, and Mobile Friendliness.`;
                case 'off-page': return `${commonInstructions} Focus on Off-Page SEO. Since you can't crawl backlinks, provide conceptual analysis. Include metrics like: Domain Authority (estimated concept), Backlink Profile (conceptual strength), Social Media Presence (look for common social links on the page), and Brand Mentions (conceptual). The 'value' for these should be descriptive text like 'Appears Strong' or 'Needs Improvement'.`;
                case 'content': return `${commonInstructions} Focus on Content Analysis. Include metrics like: Readability Score (e.g., Flesch-Kincaid), Content Originality (conceptual assessment), Keyword Usage (are there clear topics?), and Call-to-Actions (presence and clarity). For Readability, the value should be a grade level.`;
                case 'performance': return `${commonInstructions} Focus on Web Performance. Include metrics like: Largest Contentful Paint (LCP), First Contentful Paint (FCP), Cumulative Layout Shift (CLS), Image Optimization, JavaScript/CSS Minification, and Caching Policy. For Core Web Vitals, provide an estimated numeric 'value' and a 'unit' ('s' for seconds, unitless for CLS). For other metrics, the 'value' should be descriptive text.`;
                default: throw new Error('Invalid analysis type');
            }
        };

        const analysisSchema = {
            type: Type.OBJECT,
            properties: {
                metrics: {
                    type: Type.ARRAY,
                    items: {
                        type: Type.OBJECT,
                        properties: {
                            name: { type: Type.STRING },
                            value: { type: Type.STRING },
                            unit: { type: Type.STRING, description: "The unit for the value, e.g., 's', 'ms'." },
                            explanation: { type: Type.STRING },
                            recommendation: { type: Type.STRING },
                            score: { type: Type.INTEGER },
                        },
                        required: ["name", "value", "explanation", "recommendation", "score"],
                    },
                },
            },
            required: ["metrics"],
        };

        const analyzeWebsite = async (url, type) => {
            const prompt = getAnalysisPrompt(url, type);
            try {
                const response = await ai.models.generateContent({
                    model: 'gemini-2.5-flash',
                    contents: prompt,
                    config: {
                        responseMimeType: "application/json",
                        responseSchema: analysisSchema,
                    },
                });
                const result = JSON.parse(response.text.trim());
                if (!result || !Array.isArray(result.metrics)) throw new Error("Invalid JSON structure.");
                return result;
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                throw new Error("Failed to get analysis from Gemini API.");
            }
        };

        // --- UI RENDERING ---
        const renderError = (message) => {
            errorContainer.innerHTML = `<div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg" role="alert">
                <strong class="font-bold">Error: </strong>
                <span class="block sm:inline">${message}</span>
            </div>`;
        };

        const renderLoading = (isLoading) => {
            state.isLoading = isLoading;
            urlInput.disabled = isLoading;
            analyzeButton.disabled = isLoading;
            if (isLoading) {
                buttonText.innerHTML = `<svg class="animate-spin -ml-1 mr-2 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Analysing...`;
                resultsContainer.innerHTML = `<div class="flex flex-col items-center justify-center py-20 text-center">
                    <svg class="animate-spin h-12 w-12 text-brand-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <h3 class="mt-4 text-xl font-semibold text-slate-900 dark:text-white">Analysing Website...</h3>
                    <p class="mt-2 text-slate-500 dark:text-slate-400">Gemini is working its magic. This may take a moment.</p>
                </div>`;
            } else {
                buttonText.innerHTML = 'Analyse';
            }
        };

        const renderWelcome = () => {
             resultsContainer.innerHTML = `<div class="text-center py-10 px-4">
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-3">Welcome to Sen Ai Website Analyser</h2>
                <p class="max-w-2xl mx-auto text-slate-500 dark:text-slate-400">Enter a website URL above to begin. Our tool, powered by Senternet Technologies, will conduct a comprehensive analysis to boost your site's performance and search ranking.</p>
            </div>`;
        };
        
        const getScoreColor = (score) => {
            if (score >= 80) return 'text-green-500 dark:text-green-400';
            if (score >= 50) return 'text-yellow-500 dark:text-yellow-400';
            return 'text-red-500 dark:text-red-400';
        };
        
        const renderResults = (result) => {
            const cardsHtml = result.metrics.map(metric => {
                const color = getScoreColor(metric.score);
                const circumference = 2 * Math.PI * 18;
                const offset = circumference - (metric.score / 100) * circumference;
                
                return `<div class="bg-white dark:bg-slate-800 rounded-xl p-6 flex flex-col justify-between shadow-lg hover:shadow-brand-primary/20 border border-slate-200 dark:border-slate-700 transition-shadow duration-300">
                    <div>
                        <div class="flex justify-between items-start gap-4">
                            <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-1">${metric.name}</h3>
                            <div class="relative w-16 h-16 flex items-center justify-center">
                                <svg class="w-full h-full transform -rotate-90" viewBox="0 0 40 40">
                                    <circle class="text-slate-200 dark:text-slate-700" stroke-width="4" stroke="currentColor" fill="transparent" r="18" cx="20" cy="20" />
                                    <circle class="${color.replace('text-', 'stroke-')}" stroke-width="4" stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" stroke-linecap="round" stroke="currentColor" fill="transparent" r="18" cx="20" cy="20" class="score-circle-progress" />
                                </svg>
                                <span class="absolute text-lg font-bold ${color}">${metric.score}</span>
                            </div>
                        </div>
                        <p class="text-2xl font-semibold text-brand-primary dark:text-brand-light mb-4 truncate" title="${metric.value} ${metric.unit || ''}">
                            ${metric.value}
                            ${metric.unit ? `<span class="text-lg text-slate-500 dark:text-slate-400 ml-1">${metric.unit}</span>` : ''}
                        </p>
                        <div class="text-sm text-slate-500 dark:text-slate-400 space-y-3">
                            <p><strong class="text-slate-700 dark:text-slate-300 font-semibold">Explanation:</strong> ${metric.explanation}</p>
                            <p><strong class="text-slate-700 dark:text-slate-300 font-semibold">Recommendation:</strong> ${metric.recommendation}</p>
                        </div>
                    </div>
                </div>`;
            }).join('');
            resultsContainer.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">${cardsHtml}</div>`;
        };

        const renderTabs = () => {
            tabsContainer.innerHTML = TABS.map(tab => `
                <button data-tab-id="${tab.id}" class="tab-button ${state.activeTab === tab.id ? 'border-brand-primary text-brand-primary' : 'border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:border-slate-400 dark:hover:border-slate-500'} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition-colors duration-200">
                    ${tab.label}
                </button>
            `).join('');
            tabsContainer.classList.remove('hidden');
        };

        // --- EVENT HANDLERS & LOGIC ---
        const runAnalysis = async (url, tab) => {
            renderLoading(true);
            errorContainer.innerHTML = '';
            resultsContainer.innerHTML = '';

            try {
                const result = await analyzeWebsite(url, tab);
                renderResults(result);
            } catch (err) {
                renderError(err.message || 'An unknown error occurred.');
                resultsContainer.innerHTML = ''; // Clear loading spinner on error
            } finally {
                renderLoading(false);
            }
        };

        const handleFormSubmit = (e) => {
            e.preventDefault();
            const newUrl = urlInput.value.trim();
            if (!newUrl) {
                renderError('Please enter a website URL.');
                return;
            }
             if (!/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/.test(newUrl)) {
                renderError('The entered URL is not valid. Please include http:// or https://');
                return;
            }

            state.url = newUrl;
            renderTabs();
            runAnalysis(state.url, state.activeTab);
        };

        const handleTabClick = (e) => {
            const button = e.target.closest('.tab-button');
            if (!button || state.isLoading) return;
            
            const newTabId = button.dataset.tabId;
            if (newTabId === state.activeTab) return;

            state.activeTab = newTabId;
            renderTabs();
            if (state.url) {
                runAnalysis(state.url, state.activeTab);
            }
        };

        // --- THEME TOGGLE LOGIC ---
        const applyTheme = (theme) => {
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                themeToggleLightIcon.classList.remove('hidden');
                themeToggleDarkIcon.classList.add('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleDarkIcon.classList.remove('hidden');
                themeToggleLightIcon.classList.add('hidden');
            }
        };

        themeToggleBtn.addEventListener('click', () => {
            const isDark = document.documentElement.classList.contains('dark');
            const newTheme = isDark ? 'light' : 'dark';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });

        // --- INITIALIZATION ---
        const initialTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        applyTheme(initialTheme);
        urlForm.addEventListener('submit', handleFormSubmit);
        tabsContainer.addEventListener('click', handleTabClick);
        renderWelcome();

    </script>
</body>
</html>
